steps:
- checkout: self
  persistCredentials: true
  displayName: 'Checkout current repo'

- checkout: microsoft-graph-devx-content
  persistCredentials: true
  displayName: 'Checkout content repo'
  fetchDepth: 1

- pwsh: |
    $today = Get-Date -Format "yyyyMMddHHmm"
    Write-Host "The value of today is $today"
    cd $(Build.SourcesDirectory)/microsoft-graph-devx-content
    git checkout -b translation/$today
  displayName: 'Switch to translation branch'

- pwsh: |
    cp $(Build.SourcesDirectory)/microsoft-graph-explorer-v4/src/messages/GE.json $(Build.SourcesDirectory)/microsoft-graph-devx-content/messages/
  displayName: 'Copy GE.json file'

- pwsh: |
    git config --global user.email "GraphTooling@service.microsoft.com"
    git config --global user.name "Microsoft Graph DevX Tooling"
    git config --global push.default current
    cd $(Build.SourcesDirectory)/microsoft-graph-devx-content
    git add .
    git commit -m "English file transfer"
    git push
  displayName: 'Push English file'